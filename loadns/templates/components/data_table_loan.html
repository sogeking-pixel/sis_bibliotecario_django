{% load custom_tags %}
<table id="{{table_id}}" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                {% for header in headers  %}
                    <th>{{header}}</th>
                {% endfor %}
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for item in data  %}
             <tr>
                {% for field in fields  %}
                    <td>{{ item|get_item:field }}</td>
                    
                {% endfor %}

                <td>
                    {% if not item.return_date %}
                        <span class="badge bg-yellow font-weight-bold  text-dark "><b>Pendiente</b></span>
                    {% elif item.return_date|date:"Y-m-d" > item.due_date|date:"Y-m-d" %}
                        <span class="badge bg-danger text-white font-weight-bold">Atrasado</span>
                    {% else %}
                        <span class="badge bg-success font-weight-bold text-dark"><b>Retornado</b></span>
                    {% endif %}
                </td>



                <td>
                    
                    {% if accions.show %}
                    <a data-bs-toggle="modal" data-bs-target="#showData-1" title="Ver detalles"  class="btn btn-default btn-sm p-0 px-3 py-2 " href="{%url accions.show item.id %}"><i class="fas fa-eye"></i></a>
                    {% endif %}

                    {% if accions.return %}
                    <button class="btn btn-success return-button btn-sm p-0 px-3 py-2" title="Retornar Prestamo" data-return-url="{% url accions.return item.id %}" {%if item.return_date %} disabled   {% endif %}><i class="fas fa-undo" ></i></button>
                    {% endif %}

                    {% if accions.update %}
                    <a data-bs-toggle="modal" data-bs-target="#EditData-1" title="Actualizar" class="btn btn-primary btn-sm p-0 px-3 py-2 " href="{%url accions.update item.id %}"><i class="fas fa-edit"></i></a>
                    {% endif %}

                    {% if accions.delete %}
                    <button class="btn btn-danger delete-button btn-sm p-0 px-3 py-2 "  title="Eliminar" data-delete-url="{% url accions.delete item.id %}" type="button" ><i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                                       
                   
                </td>
            </tr>
            {% endfor %}
            
            
        </tbody>
        <tfoot>
            <tr>
              
                {% for header in headers  %}
                    <th>{{header}}</th>
                {% endfor %}
                <th>Accions</th>
                
            </tr>
        </tfoot>
    </table>

    
{% include 'components/modal_delete.html' with title_modal='Confirmar Eliminaci√≥n' modal_id='deleteModal' %}
  
 {% if accions.return %}
    {% include 'components/modal_return.html' with title_modal='Retornar Libro' modal_id='returnModal' form=form_return %}
{% endif %}